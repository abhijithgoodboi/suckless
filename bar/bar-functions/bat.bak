#!/bin/bash


# Nord color scheme
GREEN="#a3be8c"  # Battery 100%-20%
YELLOW="#ebcb8b"  # Charging below 90%
RED="#bf616a"  # Battery below 20%


# Prints out battery percentage

CHARGING_ICON_1=''
CHARGING_ICON_2=''
CHARGING_ICON_3=''
CHARGING_ICON_4=''
CHARGING_ICON_5=''
CHARGING_ICON_6=''
CHARGING_ICON_7=''
CHARGING_ICON_8=''
CHARGING_ICON_9='󱐋'
CHARGING_WARNING_ICON='󱊡'
WARNING_ICON='󰂎'
BATTERY_FULL_ICON=''
BATTERY_10_ICON=''
BATTERY_20_ICON=''
BATTERY_30_ICON=''
BATTERY_40_ICON=''
BATTERY_50_ICON=''
BATTERY_60_ICON=''
BATTERY_70_ICON=''
BATTERY_80_ICON=''
#BATTERY_90_ICON='󰂂'
BATTERY_90_ICON=''


FULL_AT=100

BAT_ICON=""
ICON=""

get_battery()
{
	# The vast majority of people only use one battery.

	if [ -d /sys/class/power_supply/BAT1 ]; then
		capacity=$(cat /sys/class/power_supply/BAT1/capacity)
		charging=$(cat /sys/class/power_supply/BAT1/status)
    
     # Set the icon based on battery percentage
    if [[ "$charging" == "Charging" && $capacity == 100  ]]; then
        COLOR="$GREEN" ICON="$BATTERY_FULL_ICON"
    elif [[ "$charging" == "Charging" && $capacity -ge 90 ]]; then
        COLOR="$GREEN" ICON="$CHARGING_ICON_9"
    elif [[ "$charging" == "Charging" && $capacity -ge 80 ]]; then
        COLOR="$YELLOW" ICON="$CHARGING_ICON_8"
    elif [[ "$charging" == "Charging" && $capacity -ge 70 ]]; then
        COLOR="$YELLOW" ICON="$CHARGING_ICON_7"
    elif [[ "$charging" == "Charging" && $capacity -ge 60 ]]; then
        COLOR="$YELLOW" ICON="$CHARGING_ICON_6"
    elif [[ "$charging" == "Charging" && $capacity -ge 50 ]]; then
        COLOR="$YELLOW" ICON="$CHARGING_ICON_5"
    elif [[ "$charging" == "Charging" && $capacity -ge 40 ]]; then
        COLOR="$YELLOW" ICON="$CHARGING_ICON_4"
    elif [[ "$charging" == "Charging" && $capacity -ge 30 ]]; then
        COLOR="$YELLOW" ICON="$CHARGING_ICON_3"
    elif [[ "$charging" == "Charging" && $capacity -ge 20 ]]; then
        COLOR="$YELLOW" ICON="$CHARGING_ICON_2"
    elif [[ "$charging" == "Charging" && $capacity -ge 10 ]]; then
        COLOR="$YELLOW" ICON="$CHARGING_ICON_1"
    elif [[ "$charging" == "Charging" && $capacity -le 9 ]]; then
        ICON="$CHARGING_WARNING_ICON"
    fi

if [[ $capacity == 100 ]]; then
    COLOR="$GREEN" BAT_ICON=$BATTERY_FULL_ICON
  elif [[ $charging != "Charging" ]]; then
    if [[ $capacity -le 9 ]]; then
      COLOR="$RED" BAT_ICON=$WARNING_ICON
    elif [[ $capacity -le 19 ]]; then
      COLOR="$RED" BAT_ICON=$BATTERY_10_ICON
    elif [[ $capacity -le 29 ]]; then
      COLOR="$GREEN" BAT_ICON=$BATTERY_20_ICON
    elif [[ $capacity -le 39 ]]; then
      COLOR="$GREEN" BAT_ICON=$BATTERY_30_ICON
    elif [[ $capacity -le 49 ]]; then
      COLOR="$GREEN" BAT_ICON=$BATTERY_40_ICON
    elif [[ $capacity -le 59 ]]; then
      COLOR="$GREEN" BAT_ICON=$BATTERY_50_ICON
    elif [[ $capacity -le 69 ]]; then
      COLOR="$GREEN" BAT_ICON=$BATTERY_60_ICON
    elif [[ $capacity -le 79 ]]; then
      COLOR="$GREEN" BAT_ICON=$BATTERY_70_ICON
    elif [[ $capacity -le 89 ]]; then
      COLOR="$GREEN" BAT_ICON=$BATTERY_80_ICON
    elif [[ $capacity -le 99 ]]; then
       COLOR="$GREEN" BAT_ICON=$BATTERY_90_ICON
    fi
fi
  if [[ "$charging" == "Charging" ]]; then
    echo "  ^c$COLOR^$ICON $capacity% ^d^  "
else
  echo "  ^c$COLOR^$BAT_ICON $capacity% ^d^  "
fi

fi

}


get_battery
